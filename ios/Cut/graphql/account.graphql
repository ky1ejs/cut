
fragment ProfileFragment on ProfileInterface {
  id
  username
  name
  url
  bio
  imageUrl
}

fragment CompleteAccountFragment on CompleteAccount {
  ...ProfileFragment
  followerCount
  followingCount
  watchList {
    ...MovieFragment
  }
  followers {
    ...ProfileFragment
  }
  following {
    ...ProfileFragment
  }
}

mutation CompleteAccount($params: CompleteAccountInput!) {
  completeAccount(params: $params) {
    completeAccount {
      ...CompleteAccountFragment
    }
    updatedDevice {
      session_id
    }
  }
}

query InitiateEmailVerification($email: String!) {
  initiateEmailVerification(email: $email)
}

query CheckUsernameAvailability($username: String!) {
  isUsernameAvailable(username: $username)
}

query GetAccount {
  account {
    ... on IncompleteAccount {
      id
    }
    ... on CompleteAccount {
      ...CompleteAccountFragment
    }
  }
}
